/**
 * Copyright 2015 Knetik, Inc.
 * Includes portions of code from the following libraries. See the uncompressed, development
 * libraries included in the SPLYT SDK for Javascript for additional license information.
 *
 * 1. Underscore.js 1.6.0
 *    http://underscorejs.org
 *    Copyright (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 *
 * 2. Zepto.js 1.1.3
 *    http://zeptojs.com/
 *    Copyright (c) 2010-2014 Thomas Fuchs
 *
 * 3. php.js
 *    http://phpjs.org
 *    Copyright (c) 2013 Kevin van Zonneveld (http://kvz.io) and Contributors (http://phpjs.org/authors)
 *
 * 4. Highcharts JS
 *    http://www.highcharts.com/
 *    Copyright (c) 2009-2014 Torstein Honsi
 */
function strcmp(a,b){return a==b?0:a>b?1:-1}function strnatcmp(a,b,c){var d=0;void 0==c&&(c=!1);var e=function(a){var b=[],c="",d="",e=0,f=0,g=!0;for(f=a.length,e=0;f>e;e++)d=a.substring(e,e+1),d.match(/\d/)?(g&&(c.length>0&&(b[b.length]=c,c=""),g=!1),c+=d):0==g&&"."===d&&e<a.length-1&&a.substring(e+1,e+2).match(/\d/)?(b[b.length]=c,c=""):(0==g&&(c.length>0&&(b[b.length]=parseInt(c,10),c=""),g=!0),c+=d);return c.length>0&&(g?b[b.length]=c:b[b.length]=parseInt(c,10)),b},f=e(a+""),g=e(b+""),h=f.length,i=!0,j=-1,k=0;for(h>g.length&&(h=g.length,j=1),d=0;h>d;d++)if(isNaN(f[d])){if(!isNaN(g[d]))return i?1:-1;if(i=!0,0!=(k=this.strcmp(f[d],g[d])))return k}else{if(isNaN(g[d]))return i?-1:1;if(i||c){if(0!=(k=f[d]-g[d]))return k}else if(0!=(k=this.strcmp(f[d].toString(),g[d].toString())))return k;i=!1}return j}function CurrencyService(){"use strict";var a={ALL:"Lek",AFN:"؋",ARS:"$",AWG:"ƒ",AUD:"$",AZN:"ман",BSD:"$",BBD:"$",BYR:"p.",BZD:"BZ$",BMD:"$",BOB:"$b",BAM:"KM",BWP:"P",BGN:"лв",BRL:"R$",BND:"$",KHR:"៛",CAD:"$",KYD:"$",CLP:"$",CNY:"¥",COP:"$",CRC:"₡",HRK:"kn",CUP:"₱",CZK:"Kč",DKK:"kr",DOP:"RD$",XCD:"$",EGP:"£",SVC:"$",EEK:"kr",EUR:"€",FKP:"£",FJD:"$",GHC:"¢",GIP:"£",GTQ:"Q",GGP:"£",GYD:"$",HNL:"L",HKD:"$",HUF:"Ft",ISK:"kr",INR:"",IDR:"Rp",IRR:"﷼",IMP:"£",ILS:"₪",JMD:"J$",JPY:"¥",JEP:"£",KZT:"лв",KPW:"₩",KRW:"₩",KGS:"лв",LAK:"₭",LVL:"Ls",LBP:"£",LRD:"$",LTL:"Lt",MKD:"ден",MYR:"RM",MUR:"₨",MXN:"$",MNT:"₮",MZN:"MT",NAD:"$",NPR:"₨",ANG:"ƒ",NZD:"$",NIO:"C$",NGN:"₦",NOK:"kr",OMR:"﷼",PKR:"₨",PAB:"B/.",PYG:"Gs",PEN:"S/.",PHP:"₱",PLN:"zł",QAR:"﷼",RON:"lei",RUB:"руб",SHP:"£",SAR:"﷼",RSD:"Дин.",SCR:"₨",SGD:"$",SBD:"$",SOS:"S",ZAR:"R",LKR:"₨",SEK:"kr",CHF:"Fr.",SRD:"$",SYP:"£",TWD:"NT$",THB:"฿",TTD:"TT$",TRY:"",TRL:"₤",TVD:"$",UAH:"₴",GBP:"£",USD:"$",UYU:"$U",UZS:"лв",VEF:"Bs",VND:"₫",YER:"﷼",ZWD:"Z$"};this.intlSupported="object"==typeof window.Intl,this.getPrefix=function(b,c){if(b)if(this.intlSupported)try{var d=Intl.NumberFormat(c,{style:"currency",currency:b}).format(0);if(0!==d.indexOf(b)){var e=d.search(/\d/);if(e>0){var f=d.substring(0,e);if(b!==f)return f}}}catch(g){}else if(a.hasOwnProperty(b))return a[b];return""},this.getSuffix=function(a,b){if(a&&this.intlSupported)try{var c=Intl.NumberFormat(b,{style:"currency",currency:a}).format(0),d=c.search(/[^\d\.,]/);if(d>0)return c.substring(d)}catch(e){}return""},this.format=function(b,c,d,e){var f=Number(b).toFixed("undefined"==typeof d?2:d).toString();if(c)if(this.intlSupported)try{var g=Intl.NumberFormat(e,{style:"currency",currency:c,minimumFractionDigits:d,maximumFractionDigits:d}).format(b);0!==g.indexOf(c)&&(f=g)}catch(h){}else a.hasOwnProperty(c)&&(f=a[c]+f);return f}}function VisualizationFormatParams(){"use strict";this.mRenderType=null,this.mCaptionFormat=null,this.mYAxisType=null,this.mYAxisFormat=null,this.mXAxisFormat=null,this.mLegendVisible=null,this.mLegendFormat=null}function VisualizationParams(){"use strict";this.mLegacyParams={},this.mTitle=null,this.mSubTitle=null,this.mHeight=229,this.mHideBorder=!1,this.mLegendPosition=null,this.mMarkerSymbol=null,this.mFormatParams=new VisualizationFormatParams,this.mFormatParams.mRenderType="line",this.mFormatParams.mCaptionFormat="int",this.mFormatParams.mYAxisType="linear",this.mFormatParams.mYAxisFormat="int",this.mFormatParams.mXAxisFormat="int",this.mFormatParams.mLegendVisible=!1,this.mFormatParams.mLegendFormat=null}function Visualization(){"use strict"}function LabelIndex(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d==b||String(d)==String(b))return c}return-1}function IsosVisAxisLabelKVFormatter(a,b,c,d){var e=LabelIndex(c,a);-1!=e&&(a=d[e]);for(var f in b)if(f==a)return b[f];return a}function IsosVisAxisLabelFormatter(a,b,c,d){if(""===a)return"";if("object"==typeof b)return IsosVisAxisLabelKVFormatter(a,b,c,d);var e="undefined";switch(b){case"epochday":var f=parseInt(a),g=1e3*f*24*60*60;e=Highcharts.dateFormat("%b %e",g);break;case"epochtime":e=Highcharts.dateFormat("%b %e",parseInt(a));break;case"use-caption":var h=LabelIndex(c,a);-1!=h&&(e=d[h],null===e&&(e="unspecified"));break;case"use-index":e=LabelIndex(c,a);break;case"none":break;case"use-label":default:var i=12;e=null===a||" "===a?"unspecified":a.length>i?a.substr(0,i)+"...":a}return String(e)}function IsosVisDataPointLabelFormatter(a,b,c,d,e,f,g,h,i){var j=IsosVisAxisLabelFormatter(a,c,d,e),k=2;b%1===0?k=0:1e-4>b?k=5:.001>b?k=4:.01>b&&(k=3);var l=Highcharts.numberFormat(b,k);if(f&&0===f.indexOf("cur|")){var m=f.split("|");l=(new CurrencyService).format(b,m[1],k)}else"pct"==f&&(l+="%");var n="";g&&!_.contains(["?column?","values"],g)&&(n=void 0!==h&&g in h?"<br>("+h[g]+")":"<br>("+g+")");var o="";switch(c){case"use-index":for(var p=0;p<d.length&&d[p]!=a;++p);o="<b>"+e[p]+": </b>"+l+n;break;default:o="<b>"+j+": </b>"+l+n}return void 0!==i&&(o+=" ("+i.toFixed(2)+"%)"),o}function isos_vis(a,b,c){}function HighchartsWrapper(a,b,c){this.tooltipFormatter=function(){var a,b,c,d,e,f=this.y,g=this.series.chart.userOptions.tooltip.userFormat,h=this.series.name,i=this.series.chart.userOptions.legend.userFormat;return"pie"==this.series.type?(a=this.key,b=c=_.pluck(this.series.userOptions.data,"name"),d=void 0,e=this.percentage):(a=this.x,b=this.series.xAxis.userOptions.userLabels,c=this.series.xAxis.userOptions.userCaptions,d=this.series.yAxis.userOptions.userFormat,e=void 0),IsosVisDataPointLabelFormatter(a,f,g,b,c,d,h,i,e)},this.xAxisFormatter=function(){return IsosVisAxisLabelFormatter(this.value,this.axis.userOptions.userFormat,this.axis.userOptions.userLabels,this.axis.userOptions.userCaptions)},this.yAxisFormatter=function(){return"pct"===this.axis.userOptions.userFormat?this.value+"%":Highcharts.Axis.prototype.defaultLabelFormatter.call(this)},this.legendFormatter=function(){var a=this.series?this.series.chart:this.chart;return null!==a.userOptions.legend.userFormat?IsosVisAxisLabelFormatter(this.name,a.userOptions.legend.userFormat,a.get("xaxis").userOptions.userLabels,a.get("xaxis").userOptions.userCaptions):this.name},this.computeYAxisMin=function(a){if("logarithmic"===a)return 1;if(this.mChart&&this.mChart.series.length>0){var b=_.min(_.pluck(this.mChart.series,"dataMin")),c=_.min([0,b]);return c}return 0},this.mChart=new Highcharts.Chart(this.buildOptions(a,b,c))}function Series(a){this.error=a.errorCode,null!==a.data&&void 0!==a.data&&(this.labels=a.data.labels,this.captions=a.data.captions,this.series=a.data.series,this.transpose=a.data.transpose)}var chartDarkColor="#f5f5f5",chartLineColor="#7f818d",chartAxisColor="#7f818d",chartTitleColor="#444859",chartSubtitleColor="#8b8d97";Highcharts.theme={chart:{zoomType:"xy",backgroundColor:chartDarkColor,borderColor:"#e3e3e3",borderWidth:1,borderRadius:5,plotBackgroundColor:null,plotShadow:!1,plotBorderWidth:0},credits:{enabled:!1},xAxis:{lineColor:chartLineColor,tickColor:chartLineColor,lineWidth:1,labels:{style:{color:chartAxisColor},rotation:-45,align:"right"},id:"xaxis"},yAxis:{lineColor:chartLineColor,tickColor:chartLineColor,title:{text:""},lineWidth:1,gridLineWidth:0,min:0,id:"yaxis",labels:{style:{color:chartAxisColor}}},plotOptions:{series:{pointPadding:.05,groupPadding:.05,borderWidth:0,shadow:!1}},loading:{hideDuration:1e3,showDuration:100,labelStyle:{color:chartTitleColor,top:"35%"},style:{backgroundColor:chartDarkColor}},title:{align:"center",style:{color:chartTitleColor,fontSize:"14px",fontfamily:'"Helvetica Neue", Helvetica, Arial, sans-serif',fontWeight:"600"}},subtitle:{align:"center",style:{color:chartSubtitleColor,fontfamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'}},colors:["#ffbf40","#395ea3","#4f9566","#9c1d1d","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],plotline:{color:"#a6a6a6",dashStyle:"ShortDashDot",width:3,label:{rotation:270,verticalAlign:"bottom",textAlign:"left",y:-5,x:12,style:{color:chartTitleColor}},zIndex:99},goalLine:{color:"#a6a6a6",dashStyle:"shortdash",label:{style:{color:chartTitleColor}},width:2,zIndex:99}},Highcharts.setOptions(Highcharts.theme),VisualizationParams.prototype.setLegacyParam=function(a,b){"use strict";this.mLegacyParams[a]=b},VisualizationParams.prototype.getLegacyParam=function(a){"use strict";return this.mLegacyParams[a]||void 0},Visualization.prototype.destroy=function(){"use strict"},Visualization.prototype.create=function(a,b,c,d){"use strict";if("highchart"!==a)throw"Only Highcharts is currently supported!";return new HighchartsWrapper(b,c,d)},isos_vis.prototype.format=function(a){},isos_vis.prototype.showLoading=function(){},isos_vis.prototype.hideLoading=function(){},isos_vis.prototype.addSeries=function(a,b){},isos_vis.prototype.clear=function(){},isos_vis.prototype.addAnnotations=function(a,b){},isos_vis.prototype.removeAnnotations=function(){},isos_vis.prototype.setHeight=function(a){},isos_vis.prototype.setTitle=function(a,b){},isos_vis.prototype.addGoals=function(a){},isos_vis.prototype.removeGoals=function(a){},isos_vis.prototype.changeBaseAggregateType=function(a,b){},HighchartsWrapper.prototype=new isos_vis,HighchartsWrapper.prototype.constructor=HighchartsWrapper,HighchartsWrapper.prototype.changeBaseAggregateType=function(a,b){var c=this.buildOptions(this.mChart.userOptions.chart.div,a,b);this.mChart.get("xaxis").update(c.xAxis,!0)},HighchartsWrapper.prototype.format=function(a){var b=!1;if(a.mRenderType||null!==a.mLegendVisible){var c={};a.mRenderType&&(c.type=a.mRenderType),null!==a.mLegendVisible&&(c.showInLegend=a.mLegendVisible);for(var d=0;d<this.mChart.series.length;d++)this.mChart.series[d].update(c,!1);"pie"===a.mRenderType?(this.mChart.get("yaxis").update({lineWidth:0}),this.mChart.get("xaxis").update({lineWidth:0})):(this.mChart.get("yaxis").update({lineWidth:Highcharts.theme.yAxis.lineWidth}),this.mChart.get("xaxis").update({lineWidth:Highcharts.theme.xAxis.lineWidth})),this.mChart.userOptions.legend.userVisibility=a.mLegendVisible,b=!0}a.mYAxisType&&(this.mChart.get("yaxis").update({type:a.mYAxisType,min:this.computeYAxisMin(a.mYAxisType)}),b=!0),a.mYAxisFormat&&(this.mChart.get("yaxis").update({userFormat:a.mYAxisFormat}),b=!0),a.mXAxisFormat&&(this.mChart.get("xaxis").update({userFormat:a.mXAxisFormat}),b=!0),a.mCaptionFormat?(this.mChart.userOptions.tooltip.userFormat=a.mCaptionFormat,b=!1):a.mXAxisFormat&&(this.mChart.userOptions.tooltip.userFormat=a.mXAxisFormat,b=!1),a.mLegendFormat&&(this.mChart.userOptions.legend.userFormat=a.mLegendFormat,b=!1),b&&this.mChart.redraw()},HighchartsWrapper.prototype.buildOptions=function(a,b,c){var d=c.mHeight,e=c.getLegacyParam("enablezoom"),f=c.getLegacyParam("linecolor"),g=c.getLegacyParam("linewidth"),h=c.getLegacyParam("markerson"),i=c.getLegacyParam("xaxison"),j=c.getLegacyParam("yaxison"),k=c.mFormatParams,l={};return l.chart={},l.chart.renderTo=a,l.chart.height=d,l.chart.events={},l.chart.ignoreHiddenSeries="datetime"===b,c.mHideBorder&&(l.chart.borderWidth=0),e&&"false"===e&&(l.chart.zoomType=""),l.chart.type=k.mRenderType,l.xAxis={},l.xAxis.userFormat=k.mXAxisFormat,l.xAxis.id="xaxis",l.xAxis.labels={},l.xAxis.labels.formatter=this.xAxisFormatter,l.xAxis.type=b,l.xAxis.minRange="datetime"===b&&864e5||void 0,l.xAxis.minTickInterval="datetime"===b&&864e5||void 0,l.yAxis={},l.yAxis.userFormat=k.mYAxisFormat,l.yAxis.type=k.mYAxisType||"linear",l.yAxis.min=this.computeYAxisMin(l.yAxis.type),l.yAxis.id="yaxis",l.yAxis.labels={},l.yAxis.labels.formatter=this.yAxisFormatter,l.title={},l.title.text=c.mTitle||void 0,l.subtitle={},l.subtitle.text=c.mSubTitle||void 0,l.legend={},l.legend.enabled=!0,l.legend.labelFormatter=this.legendFormatter,l.legend.userFormat=c.mFormatParams.mLegendFormat,c.mLegendPosition&&("left"===c.mLegendPosition||"right"===c.mLegendPosition?(l.legend.verticalAlign="middle",l.legend.layout="vertical",l.legend.align=c.mLegendPosition):"vertical"===c.mLegendPosition&&(l.legend.layout="vertical")),l.legend.userVisibility=k.mLegendVisible,l.tooltip={},l.tooltip.userFormat=k.mCaptionFormat||k.mXAxisFormat,l.tooltip.formatter=this.tooltipFormatter,l.plotOptions={},l.plotOptions.column={},l.plotOptions.line={},l.plotOptions.spline={},l.plotOptions.spline.marker={},l.plotOptions.spline.marker.enabled=!1,l.plotOptions.series={},l.plotOptions.series.color=f,g&&(l.plotOptions.series.lineWidth=parseInt(g)),l.plotOptions.series.marker={},l.plotOptions.series.marker.symbol=c.mMarkerSymbol||void 0,h&&("false"===h?l.plotOptions.series.marker.enabled=!1:"true"===h&&(l.plotOptions.series.marker.enabled=!0)),void 0!==i&&("false"===i&&(l.xAxis.lineWidth=0,l.xAxis.minorGridLineWidth=0,l.xAxis.lineColor="transparent",l.xAxis.minorTickLength=0,l.xAxis.tickLength=0),("false"===i||"nolabels"===i)&&(l.xAxis.labels.enabled=!1)),void 0!==j&&("false"===j&&(l.yAxis.lineWidth=0,l.yAxis.minorGridLineWidth=0,l.yAxis.lineColor="transparent",l.yAxis.minorTickLength=0,l.yAxis.tickLength=0),("false"===j||"nolabels"===j)&&(l.yAxis.labels.enabled=!1)),l.wrapper=this,l},HighchartsWrapper.prototype.addSeries=function(a,b){var c=0,d=a.labels,e=a.series,f=a.error,g=this.mChart.get("xaxis"),h=this.mChart.get("yaxis");g.update({userLabels:a.labels,userCaptions:a.captions},!1);var i=g.userOptions.type,j=h.userOptions.type,k=[];if("boxplot"==this.mChart.userOptions.chart.type){var l=[];for(c=0;c<d.length;c++)l[c]=[],l[c].push(e.group_min[c]),l[c].push(e.group_q1[c]),l[c].push(e.group_median[c]),l[c].push(e.group_q3[c]),l[c].push(e.group_max[c]);this.mChart.get("xaxis").setCategories(d,!1),k.push({data:l})}else{for(var m in e){var n=[];for(c=0;c<e[m].length;c++){var o=d[c],p=e[m][c];"datetime"===i&&(o*=1e3),"pct"==h.userOptions.userFormat&&null!==p&&(p*=100),"logarithmic"===j&&0===p&&null!==p&&(p=1e-5);var q=null;if("datetime"===i?q=o:(q=d[c],q=""===q||null===q?" ":q.toString()),_.isNumber(p)){var r={name:q,y:p};"category"!==i&&(r.x=o),n.push(r)}}k.push({name:m,type:b,data:n})}"category"===i&&this.mChart.get("xaxis").setCategories(d,!1)}for(var s=0;s<k.length;s++)this.mChart.addSeries(k[s],!1);for(var t=1==this.mChart.series.length?!1:this.mChart.userOptions.legend.userVisibility,u=0;u<this.mChart.series.length;u++)this.mChart.series[u].update({showInLegend:t},!1);this.mChart.get("yaxis").update({min:this.computeYAxisMin(j)}),this.handleError(f),this.mChart.redraw()},HighchartsWrapper.prototype.handleError=function(a){switch(a){case 0:break;case-5:this.mChart.setTitle(null,{text:"There is no data for this graph yet.",style:{color:"#FF0000"}});break;default:this.mChart.setTitle(null,{text:"An error occurred loading "+this.mChart.userOptions.title.text+". Please refresh.",style:{color:"#FF0000"}})}},HighchartsWrapper.prototype.setTitle=function(a,b){this.mChart.setTitle(a,b)},HighchartsWrapper.prototype.setHeight=function(a){this.mChart.setSize(this.mChart.chartWidth,a)},HighchartsWrapper.prototype.clear=function(){for(;this.mChart.series.length>0;)this.mChart.series[0].remove(!1);this.mChart.colorCounter=0,this.mChart.symbolCounter=0,this.mChart.redraw()},HighchartsWrapper.prototype.showLoading=function(){this.mChart&&this.mChart.showLoading()},HighchartsWrapper.prototype.hideLoading=function(){this.mChart&&this.mChart.hideLoading()},HighchartsWrapper.prototype.removeAnnotations=function(){var a=this.mChart.get("xaxis"),b=a.plotLinesAndBands.length,c=[],d=0;for(d=0;b>d;d++)c[d]=a.plotLinesAndBands[d].id;for(d=0;b>d;d++)a.removePlotBand(c[d])},HighchartsWrapper.prototype.addAnnotations=function(a,b){var c=this.mChart.get("xaxis"),d={};_.each(a,function(a){var c=1e3*dayifyTimestamp(parseInt(a.epoch));if(d[c])d[c].count++,d[c].plotline.label.text="<i>"+d[c].count+" events</i>";else{var e={id:c,value:c,events:{click:function(c){b(a)},mouseover:function(a){document.body.style.cursor="pointer"},mouseout:function(a){document.body.style.cursor="default"}},label:{text:a.label}};d[c]={count:1,plotline:Highcharts.merge(e,Highcharts.theme.plotline)}}}),_.each(d,function(a){c.addPlotLine(a.plotline)})},HighchartsWrapper.prototype.addGoals=function(a){var b=this.mChart.get("yaxis");_.each(a,function(a){b.removePlotLine(a.id),b.addPlotLine(Highcharts.merge({id:a.id,label:{text:""},value:plotline.value},Highcharts.theme.goalLine))})},HighchartsWrapper.prototype.removeGoals=function(a){var b=this.mChart.get("yaxis");_.each(a,function(a){b.removePlotLine(a.id)})},Series.prototype.getFirstSeries=function(){for(var a in this.series)return this.series[a]},Series.prototype.getElementsWithIndices=function(a,b){return _.map(b,function(b){return a[b]})},Series.prototype.getValuesColumn=function(){var a=this.series[this.transpose],b=null;for(var c in this.series)if(c!=this.transpose){var d=this.series[c];if(_.isArray(d)&&d.length==a.length){if(null!==b)throw new Error("Could not determine value column for transpose; multiple columns exist.");b=d}}if(null===b)throw new Error("Could not find a value column for transpose.");return b},Series.prototype.getUnique=function(a){for(var b=[],c=0;c<a.length;c++)_.contains(b,a[c])||b.push(a[c]);return b},Series.prototype.getUniqueFirstIndices=function(a){for(var b=[],c=[],d=0;d<a.length;d++)_.contains(b,a[d])||(c.push(d),b.push(a[d]));return c},Series.prototype.applyTransforms=function(){if(this.transpose&&this.series.hasOwnProperty(this.transpose)){var a=this.getValuesColumn(),b=this.getUniqueFirstIndices(this.labels);this.getUnique(this.series[this.transpose]);for(var c=this.getElementsWithIndices(this.labels,b),d=this.getElementsWithIndices(this.captions,b),e={},f=0;f<this.series[this.transpose].length;f++){var g=this.labels[f],h=this.series[this.transpose][f],i=a[f],j=c.indexOf(g);if(!e.hasOwnProperty(h)){e[h]=[];for(var k=0;k<c.length;k++)e[h][k]=0}e[h][j]+=i}this.labels=c,this.captions=d,this.series=e,this.transpose=void 0}},Series.prototype.tiedSort=function(a,b){var c=null;if("naturalSort"==b&&_.isArray(a)&&a.length==this.labels.length){c=strnatcmp;var d=_.tiedSort([a,this.labels],c)[1],e=_.tiedSort([a,this.captions],c)[1];_.replaceArrayContents(this.labels,d),_.replaceArrayContents(this.captions,e);for(var f in this.series){var g=_.tiedSort([a,this.series[f]],c)[1];_.replaceArrayContents(this.series[f],g)}return this}},function(){"use strict";function a(a){return a=String(a),a.charAt(0).toUpperCase()+a.slice(1)}function b(a,b){var c=-1,e=a.length;if(e==e>>>0)for(;++c<e;)b(a[c],c,a);else d(a,b)}function c(b){return b=j(b),/^(?:webOS|i(?:OS|P))/.test(b)?b:a(b)}function d(a,b){for(var c in a)f(a,c)&&b(a[c],c,a)}function e(b){return null==b?a(b):s.call(b).slice(8,-1)}function f(){return f=function(a,b){var c=null!=a&&(a.constructor||Object).prototype;return!!c&&b in Object(a)&&!(b in c&&a[b]===c[b])},"Function"==e(y)?f=function(a,b){return null!=a&&y.call(a,b)}:{}.__proto__==Object.prototype&&(f=function(a,b){var c=!1;return null!=a&&(a=Object(a),a.__proto__=[a.__proto__,a.__proto__=null,c=b in a][0]),c}),f.apply(this,arguments)}function g(a,b){var c=null!=a?typeof a[b]:"number";return!/^(?:boolean|number|string|undefined)$/.test(c)&&("object"==c?!!a[b]:!0)}function h(a){return String(a).replace(/([ -])(?!$)/g,"$1?")}function i(a,c){var d=null;return b(a,function(b,e){d=c(d,b,e,a)}),d}function j(a){return String(a).replace(/^ +| +$/g,"")}function k(a){function b(b){return i(b,function(b,c){return b||RegExp("\\b"+(c.pattern||h(c))+"\\b","i").exec(a)&&(c.label||c)})}function f(b){return i(b,function(b,c,d){return b||(c[O]||c[/^[a-z]+(?: +[a-z]+\b)*/i.exec(O)]||RegExp("\\b"+h(d)+"(?:\\b|\\w*\\d)","i").exec(a))&&d})}function l(b){return i(b,function(b,c){return b||RegExp("\\b"+(c.pattern||h(c))+"\\b","i").exec(a)&&(c.label||c)})}function p(b){return i(b,function(b,d){var e=d.pattern||h(d);return!b&&(b=RegExp("\\b"+e+"(?:/[\\d.]+|[ \\w.]*)","i").exec(a))&&(G={6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},/^Win/i.test(b)&&(G=G[/[\d.]+$/.exec(b)])&&(b="Windows "+G),b=c(String(b).replace(RegExp(e,"i"),d.label||d).replace(/ ce$/i," CE").replace(/hpw/i,"web").replace(/Macintosh/,"Mac OS").replace(/_PowerPC/i," OS").replace(/(OS X) [^ \d]+/i,"$1").replace(/Mac (OS X)/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/x86\.64/gi,"x86_64").split(" on ")[0])),b})}function y(b){return i(b,function(b,d){var e=d.pattern||h(d);return!b&&(b=RegExp("\\b"+e+" *\\d+[.\\w_]*","i").exec(a)||RegExp("\\b"+e+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(a))&&((b=String(d.label&&!RegExp(e,"i").test(d.label)?d.label:b).split("/"))[1]&&!/[\d.]+/.test(b[0])&&(b[0]+=" "+b[1]),d=d.label||d,b=c(b[0].replace(RegExp(e,"i"),d).replace(RegExp("; *(?:"+d+"[_-])?","i")," ").replace(RegExp("("+d+")[-_.]?(\\w)","i"),"$1 $2"))),b})}function E(b){return i(b,function(b,c){return b||(RegExp(c+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(a)||0)[1]||null})}function F(){return this.description||""}a||(a=D);var G,H=a,I=[],J=null,K=a==D,L=K&&A&&"function"==typeof A.version&&A.version(),M=b([{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","Trident","KHTML","Gecko"]),N=l(["Adobe AIR","Arora","Avant Browser","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel",{label:"SRWare Iron",pattern:"Iron"},"K-Meleon","Konqueror","Lunascape","Maxthon","Midori","Nook Browser","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser","Sunrise","Swiftfox","WebPositive","Opera Mini","Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"IE",pattern:"MSIE"},"Safari"]),O=y([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},"Google TV","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nook","PlayBook","PlayStation 4","PlayStation 3","PlayStation Vita","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),P=f({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),Q=p(["Android","CentOS","Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(M&&(M=[M]),P&&!O&&(O=y([P])),(G=/Google TV/.exec(O))&&(O=G[0]),/\bSimulator\b/i.test(a)&&(O=(O?O+" ":"")+"Simulator"),/^iP/.test(O)?(N||(N="Safari"),Q="iOS"+((G=/ OS ([\d_]+)/i.exec(a))?" "+G[1].replace(/_/g,"."):"")):"Konqueror"!=N||/buntu/i.test(Q)?P&&"Google"!=P&&(/Chrome/.test(N)&&!/Mobile Safari/.test(a)||/Vita/.test(O))?(N="Android Browser",Q=/Android/.test(Q)?Q:"Android"):(!N||(G=!/\bMinefield\b|\(Android;/i.test(a)&&/Firefox|Safari/.exec(N)))&&(N&&!O&&/[\/,]|^[^(]+?\)/.test(a.slice(a.indexOf(G+"/")+8))&&(N=null),(G=O||P||Q)&&(O||P||/Android|Symbian OS|Tablet OS|webOS/.test(Q))&&(N=/[a-z]+(?: Hat)?/i.exec(/Android/.test(Q)?Q:G)+" Browser")):Q="Kubuntu",(G=/\((Mobile|Tablet).*?Firefox/i.exec(a))&&G[1]&&(Q="Firefox OS",O||(O=G[1])),L||(L=E(["(?:Cloud9|CriOS|CrMo|Iron|Opera ?Mini|OPR|Raven|Silk(?!/[\\d.]+$))","Version",h(N),"(?:Firefox|Minefield|NetFront)"])),"iCab"==M&&parseFloat(L)>3?M=["WebKit"]:(G=/Opera/.test(N)&&(/OPR/.test(a)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(a)&&"WebKit"||!M&&/\bMSIE\b/i.test(a)&&("Mac OS"==Q?"Tasman":"Trident"))?M=[G]:/PlayStation(?! Vita)/i.test(N)&&"WebKit"==M&&(M=["NetFront"]),N||"Trident"!=M||(N="IE",L=(/\brv:([\d.]+)/.exec(a)||0)[1]),K){if(g(m,"global"))if(t&&(G=t.lang.System,H=G.getProperty("os.arch"),Q=Q||G.getProperty("os.name")+" "+G.getProperty("os.version")),o)if(C==n&&"object"==typeof system&&(G=[system])[0]){Q||(Q=G[0].os||null);try{G[1]=(G[1]=require)&&G[1]("ringo/engine").version,L=G[1].join("."),N="RingoJS"}catch(R){G[0].global==q&&(N="Narwhal")}}else"object"==typeof process&&(G=process)?(N="Node.js",H=G.arch,Q=G.platform,L=/[\d.]+/.exec(G.version)[0]):u&&(N="Rhino");else u&&(N="Rhino");else"ScriptBridgingProxyObject"==e(G=m.runtime)?(N="Adobe AIR",Q=G.flash.system.Capabilities.os):"RuntimeObject"==e(G=m.phantom)?(N="PhantomJS",L=(G=G.version||null)&&G.major+"."+G.minor+"."+G.patch):"number"==typeof x.documentMode&&(G=/\bTrident\/(\d+)/i.exec(a))&&(L=[L,x.documentMode],(G=+G[1]+4)!=L[1]&&(I.push("IE "+L[1]+" mode"),M&&(M[1]=""),L[1]=G),L="IE"==N?String(L[1].toFixed(1)):L[0]);Q=Q&&c(Q)}return L&&(G=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(L)||/(?:alpha|beta)(?: ?\d)?/i.exec(a+";"+(K&&z.appMinorVersion))||/\bMinefield\b/i.test(a)&&"a")&&(J=/b/i.test(G)?"beta":"alpha",L=L.replace(RegExp(G+"\\+?$"),"")+("beta"==J?w:v)+(/\d+\+?/.exec(G)||"")),"Fennec"==N||"Firefox"==N&&/Android|Firefox OS/.test(Q)?N="Firefox Mobile":"Maxthon"==N&&L?L=L.replace(/\.[\d.]+/,".x"):"Silk"==N?(/Mobi/i.test(a)||(Q="Android",I.unshift("desktop mode")),/Accelerated *= *true/i.test(a)&&I.unshift("accelerated")):"IE"==N&&(G=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(a)||0)[1])?(N+=" Mobile",Q="Windows Phone OS "+G+".x",I.unshift("desktop mode")):/Xbox/i.test(O)?(Q=null,"Xbox 360"==O&&/IEMobile/.test(a)&&I.unshift("mobile mode")):"Chrome"!=N&&"IE"!=N&&(!N||O||/Browser|Mobi/.test(N))||"Windows CE"!=Q&&!/Mobi/i.test(a)?"IE"==N&&K&&"object"==typeof external&&!external?I.unshift("platform preview"):(/BlackBerry/.test(O)||/BB10/.test(a))&&(G=(RegExp(O.replace(/ +/g," *")+"/([.\\d]+)","i").exec(a)||0)[1]||L)?(G=[G,/BB10/.test(a)],Q=(G[1]?(O=null,P="BlackBerry"):"Device Software")+" "+G[0],L=null):this!=d&&"Wii"!=O&&(K&&A||/Opera/.test(N)&&/\b(?:MSIE|Firefox)\b/i.test(a)||"Firefox"==N&&/OS X (?:\d+\.){2,}/.test(Q)||"IE"==N&&(Q&&!/^Win/.test(Q)&&L>5.5||/Windows XP/.test(Q)&&L>8||8==L&&!/Trident/.test(a)))&&!r.test(G=k.call(d,a.replace(r,"")+";"))&&G.name&&(G="ing as "+G.name+((G=G.version)?" "+G:""),r.test(N)?(/IE/.test(G)&&"Mac OS"==Q&&(Q=null),G="identify"+G):(G="mask"+G,N=B?c(B.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/IE/.test(G)&&(Q=null),K||(L=null)),M=["Presto"],I.push(G)):N+=" Mobile",(G=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(a)||0)[1])&&(G=[parseFloat(G.replace(/\.(\d)$/,".0$1")),G],"Safari"==N&&"+"==G[1].slice(-1)?(N="WebKit Nightly",J="alpha",L=G[1].slice(0,-1)):(L==G[1]||L==(G[2]=(/\bSafari\/([\d.]+\+?)/i.exec(a)||0)[1]))&&(L=null),G[1]=(/\bChrome\/([\d.]+)/i.exec(a)||0)[1],537.36==G[0]&&537.36==G[2]&&parseFloat(G[1])>=28&&(M=["Blink"]),!K||/internal|\n/i.test(s.toString())&&!G[1]?(M&&(M[1]="like Safari"),G=G[0],G=400>G?1:500>G?2:526>G?3:533>G?4:534>G?"4+":535>G?5:537>G?6:538>G?7:"7"):(M&&(M[1]="like Chrome"),G=G[1]||(G=G[0],530>G?1:532>G?2:532.05>G?3:533>G?4:534.03>G?5:534.07>G?6:534.1>G?7:534.13>G?8:534.16>G?9:534.24>G?10:534.3>G?11:535.01>G?12:535.02>G?"13+":535.07>G?15:535.11>G?16:535.19>G?17:536.05>G?18:536.1>G?19:537.01>G?20:537.11>G?"21+":537.13>G?23:537.18>G?24:537.24>G?25:537.36>G?26:"Blink"!=M?"27":"28")),M&&(M[1]+=" "+(G+="number"==typeof G?".x":/[.+]/.test(G)?"":"+")),"Safari"==N&&(!L||parseInt(L)>45)&&(L=G)),"Opera"==N&&(G=/(?:zbov|zvav)$/.exec(Q))?(N+=" ",I.unshift("desktop mode"),"zvav"==G?(N+="Mini",L=null):N+="Mobile"):"Safari"==N&&/Chrome/.exec(M&&M[1])&&(I.unshift("desktop mode"),N="Chrome Mobile",L=null,/OS X/.test(Q)?(P="Apple",Q="iOS 4.3+"):Q=null),L&&0==L.indexOf(G=/[\d.]+$/.exec(Q))&&a.indexOf("/"+G+"-")>-1&&(Q=j(Q.replace(G,""))),M&&!/Avant|Nook/.test(N)&&(/Browser|Lunascape|Maxthon/.test(N)||/^(?:Adobe|Arora|Midori|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(N)&&M[1])&&(G=M[M.length-1])&&I.push(G),I.length&&(I=["("+I.join("; ")+")"]),P&&O&&O.indexOf(P)<0&&I.push("on "+P),O&&I.push((/^on /.test(I[I.length-1])?"":"on ")+O),Q&&(G=/ ([\d.+]+)$/.exec(Q),Q={architecture:32,family:G?Q.replace(G[0],""):Q,version:G?G[1]:null,toString:function(){var a=this.version;return this.family+(a?" "+a:"")+(64==this.architecture?" 64-bit":"")}}),(G=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(H))&&!/\bi686\b/i.test(H)&&(Q&&(Q.architecture=64,Q.family=Q.family.replace(RegExp(" *"+G),"")),N&&(/WOW64/i.test(a)||K&&/\w(?:86|32)$/.test(z.cpuClass||z.platform))&&I.unshift("32-bit")),a||(a=null),{version:N&&L&&(I.unshift(L),L),name:N&&(I.unshift(N),N),os:Q?(N&&!(Q==String(Q).split(" ")[0]&&(Q==N.split(" ")[0]||O))&&I.push(O?"("+Q+")":"on "+Q),Q):{architecture:null,family:null,version:null,toString:function(){return"null"}},description:I.length?I.join(" "):a,layout:M&&M[0],manufacturer:P,prerelease:J,product:O,ua:a,parse:k,toString:F}}var l={"function":!0,object:!0},m=l[typeof window]&&window||this,n=m,o=l[typeof exports]&&exports,p=l[typeof module]&&module&&!module.nodeType&&module,q=o&&p&&"object"==typeof global&&global;!q||q.global!==q&&q.window!==q&&q.self!==q||(m=q);var r=/Opera/,s=Object.prototype.toString,t=/Java/.test(e(m.java))&&m.java,u=t&&"Environment"==e(m.environment),v=t?"a":"α",w=t?"b":"β",x=m.document||{},y={}.hasOwnProperty,z=m.navigator||{},A=m.operamini||m.opera,B=r.test(B=e(A))?B:A=null,C=this,D=z.userAgent||"";"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return k()}):o&&p?d(k(),function(a,b){o[b]=a}):m.platform=k()}.call(this);var SplytUtil=function(){function a(a){return null==a?String(a):j[k.call(a)]||"object"}function b(a){return null!=a&&a==a.window}function c(b){return"object"==a(b)}function d(a){return c(a)&&!b(a)&&Object.getPrototypeOf(a)==Object.prototype}var e={},f=Array.prototype,g=f.slice,h=f.forEach;window.JSON&&(e.parseJSON=JSON.parse);var i=e.each=e.forEach=function(a,b,c){if(null==a)return a;if(h&&a.forEach===h)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d,a)===breaker)return}else for(var f=_.keys(a),d=0,e=f.length;e>d;d++)if(b.call(c,a[f[d]],f[d],a)===breaker)return;return a};e.extend=function(a){return i(g.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a};var j={},k=j.toString,l=Array.isArray||function(a){return a instanceof Array};return e.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){j["[object "+a+"]"]=a.toLowerCase()}),e.type=a,e.isWindow=b,e.isArray=l,e.isPlainObject=d,e}();!function(a){function b(a,b,c){}function c(a,c,d,e){return a.global?b(c||s,d,e):void 0}function d(b){b.global&&0===a.active++&&c(b,null,"ajaxStart")}function e(b){b.global&&!--a.active&&c(b,null,"ajaxStop")}function f(a,b){var d=b.context;return b.beforeSend.call(d,a,b)===!1||c(b,d,"ajaxBeforeSend",[a,b])===!1?!1:void c(b,d,"ajaxSend",[a,b])}function g(a,b,d,e){var f=d.context,g="success";d.success.call(f,a,g,b),e&&e.resolveWith(f,[a,g,b]),c(d,f,"ajaxSuccess",[b,d,a]),i(g,b,d)}function h(a,b,d,e,f){var g=e.context;e.error.call(g,d,b,a),f&&f.rejectWith(g,[d,b,a]),c(e,g,"ajaxError",[d,e,a||b]),i(b,d,e)}function i(a,b,d){var f=d.context;d.complete.call(f,b,a),c(d,f,"ajaxComplete",[b,d]),e(d)}function j(){}function k(a){return a&&(a=a.split(";",2)[0]),a&&(a==w?"html":a==v?"json":t.test(a)?"script":u.test(a)&&"xml")||"text"}function l(a,b){return""==b?a:(a+"&"+b).replace(/[&?]{1,2}/,"?")}function m(b){b.processData&&b.data&&"string"!=a.type(b.data)&&(b.data=a.param(b.data,b.traditional)),!b.data||b.type&&"GET"!=b.type.toUpperCase()||(b.url=l(b.url,b.data),b.data=void 0)}function n(b,c,d,e){return a.isFunction(c)&&(e=d,d=c,c=void 0),a.isFunction(d)||(e=d,d=void 0),{url:b,data:c,success:d,dataType:e}}function o(b,c,d,e){var f,g=a.isArray(c),h=a.isPlainObject(c);a.each(c,function(c,i){f=a.type(i),e&&(c=d?e:e+"["+(h||"object"==f||"array"==f?c:"")+"]"),!e&&g?b.add(i.name,i.value):"array"==f||!d&&"object"==f?o(b,i,d,c):b.add(c,i)})}var p,q,r=0,s=window.document,t=/^(?:text|application)\/javascript/i,u=/^(?:text|application)\/xml/i,v="application/json",w="text/html",x=/^\s*$/;
a.active=0,a.ajaxJSONP=function(b,c){if(!("type"in b))return a.ajax(b);var d,e,i=b.jsonpCallback,j=(a.isFunction(i)?i():i)||"jsonp"+ ++r,k=s.createElement("script"),l=window[j],m=function(b){a(k).triggerHandler("error",b||"abort")},n={abort:m};return c&&c.promise(n),a(k).on("load error",function(f,i){clearTimeout(e),a(k).off().remove(),"error"!=f.type&&d?g(d[0],n,b,c):h(null,i||"error",n,b,c),window[j]=l,d&&a.isFunction(l)&&l(d[0]),l=d=void 0}),f(n,b)===!1?(m("abort"),n):(window[j]=function(){d=arguments},k.src=b.url.replace(/\?(.+)=\?/,"?$1="+j),s.head.appendChild(k),b.timeout>0&&(e=setTimeout(function(){m("timeout")},b.timeout)),n)},a.ajaxSettings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:v,xml:"application/xml, text/xml",html:w,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},a.ajax=function(b){var c=a.extend({},b||{}),e=a.Deferred&&a.Deferred();for(p in a.ajaxSettings)void 0===c[p]&&(c[p]=a.ajaxSettings[p]);d(c),c.crossDomain||(c.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(c.url)&&RegExp.$2!=window.location.host),c.url||(c.url=window.location.toString()),m(c),c.cache===!1&&(c.url=l(c.url,"_="+Date.now()));var i=c.dataType,n=/\?.+=\?/.test(c.url);if("jsonp"==i||n)return n||(c.url=l(c.url,c.jsonp?c.jsonp+"=?":c.jsonp===!1?"":"callback=?")),a.ajaxJSONP(c,e);var o,r=c.accepts[i],s={},t=function(a,b){s[a.toLowerCase()]=[a,b]},u=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,v=c.xhr(),w=v.setRequestHeader;if(e&&e.promise(v),c.crossDomain||t("X-Requested-With","XMLHttpRequest"),t("Accept",r||"*/*"),(r=c.mimeType||r)&&(r.indexOf(",")>-1&&(r=r.split(",",2)[0]),v.overrideMimeType&&v.overrideMimeType(r)),(c.contentType||c.contentType!==!1&&c.data&&"GET"!=c.type.toUpperCase())&&t("Content-Type",c.contentType||"application/x-www-form-urlencoded"),c.headers)for(q in c.headers)t(q,c.headers[q]);if(v.setRequestHeader=t,v.onreadystatechange=function(){if(4==v.readyState){v.onreadystatechange=j,clearTimeout(o);var b,d=!1;if(v.status>=200&&v.status<300||304==v.status||0==v.status&&"file:"==u){i=i||k(c.mimeType||v.getResponseHeader("content-type")),b=v.responseText;try{"script"==i?(1,eval)(b):"xml"==i?b=v.responseXML:"json"==i&&(b=x.test(b)?null:a.parseJSON(b))}catch(f){d=f}d?h(d,"parsererror",v,c,e):g(b,v,c,e)}else h(v.statusText||null,v.status?"error":"abort",v,c,e)}},f(v,c)===!1)return v.abort(),h(null,"abort",v,c,e),v;if(c.xhrFields)for(q in c.xhrFields)v[q]=c.xhrFields[q];var y="async"in c?c.async:!0;v.open(c.type,c.url,y,c.username,c.password);for(q in s)w.apply(v,s[q]);return c.timeout>0&&(o=setTimeout(function(){v.onreadystatechange=j,v.abort(),h(null,"timeout",v,c,e)},c.timeout)),v.send(c.data?c.data:null),v},a.get=function(){return a.ajax(n.apply(null,arguments))},a.post=function(){var b=n.apply(null,arguments);return b.type="POST",a.ajax(b)},a.getJSON=function(){var b=n.apply(null,arguments);return b.dataType="json",a.ajax(b)};var y=encodeURIComponent;a.param=function(a,b){var c=[];return c.add=function(a,b){this.push(y(a)+"="+y(b))},o(c,a,b),c.join("&").replace(/%20/g,"+")}}(SplytUtil),function(a){a.is_float=function(a){"use strict";return!(+a!==a||isFinite(a)&&!(a%1))},a.gettype=function(a){"use strict";var b,c=typeof a,d=function(a){var b=/\W*function\s+([\w\$]+)\s*\(/.exec(a);return b?b[1]:"(Anonymous)"};return"object"===c?null!==a?"number"!=typeof a.length||a.propertyIsEnumerable("length")||"function"!=typeof a.splice?a.constructor&&d(a.constructor)&&(b=d(a.constructor),"Date"===b?c="date":"RegExp"===b?c="regexp":"PHPJS_Resource"===b&&(c="resource")):c="array":c="null":"number"===c&&(c=this.is_float(a)?"double":"integer"),c},a.settype=function(a,b){"use strict";var c,d,e,f,g=function(a){return"object"==typeof a&&"number"==typeof a.length&&!a.propertyIsEnumerable("length")&&"function"==typeof a.splice};c=this[a]?this[a]:a;var h=!0;try{switch(b){case"boolean":if(g(c)&&0===c.length)this[a]=!1;else if("0"===c)this[a]=!1;else if("object"!=typeof c||g(c))this[a]=!!c;else{var i=!1;for(e in c)i=!0;this[a]=i}break;case"integer":"number"==typeof c?this[a]=parseInt(c,10):"string"==typeof c?(d=c.match(/^([+\-]?)(\d+)/),d?this[a]=parseInt(c,10):this[a]=0):c===!0?this[a]=1:c===!1||null===c?this[a]=0:g(c)&&0===c.length?this[a]=0:"object"==typeof c&&(this[a]=1);break;case"double":case"float":"string"==typeof c?(d=c.match(/^([+\-]?)(\d+(\.\d+)?|\.\d+)([eE][+\-]?\d+)?/),d?this[a]=parseFloat(c,10):this[a]=0):c===!0?this[a]=1:c===!1||null===c?this[a]=0:g(c)&&0===c.length?this[a]=0:"object"==typeof c&&(this[a]=1);break;case"string":null===c||c===!1?this[a]="":g(c)?this[a]="Array":"object"==typeof c?this[a]="Object":c===!0?this[a]="1":this[a]+="";break;case"array":null===c?this[a]=[]:"object"!=typeof c?this[a]=[c]:h=!1;break;case"object":if(null===c)this[a]={};else if(g(c)){for(e=0,f={};e<c.length;e++)f[e]=c;this[a]=f}else"object"!=typeof c&&(this[a]={scalar:c});break;case"null":delete this[a];break;default:h=!1}}catch(j){h=!1}return h}}(SplytUtil);var Splyt={TXN_SUCCESS:"success",TXN_ERROR:"error",ERROR_CID:"Missing or bad Customer ID",ERROR_ARGUMENT:"Bad Arguments",init:function(a,b,c){"use strict";if(Splyt.usedVars={},void 0===a||"object"!==SplytUtil.gettype(a))throw new Error(Splyt.ERROR_ARGUMENT);if(a.hasOwnProperty("host")){if("string"!==SplytUtil.gettype(a.host)||""===a.host)throw new Error(Splyt.ERROR_ARGUMENT);Splyt.params.host=a.host}if(!a.hasOwnProperty("customerId"))throw new Error(Splyt.ERROR_CID);if("string"!==SplytUtil.gettype(a.customerId)||""===a.customerId)throw new Error(Splyt.ERROR_CID);if(Splyt.params.customerId=a.customerId,a.hasOwnProperty("apikey")&&"string"===SplytUtil.gettype(a.apikey)&&""!==a.apikey&&(Splyt.params.apikey=a.apikey),a.hasOwnProperty("user")){var d=SplytUtil.gettype(a.user);if("object"===d){if(!a.user.hasOwnProperty("id"))throw new Error(Splyt.ERROR_ARGUMENT);if(Splyt.params.user=a.user,a.user.hasOwnProperty("properties")){if("object"!==SplytUtil.gettype(a.user.properties))throw new Error(Splyt.ERROR_ARGUMENT)}else Splyt.params.user.properties={}}else{if("string"!==d&&"integer"!==d)throw new Error(Splyt.ERROR_ARGUMENT);Splyt.params.user={id:a.user,properties:{}}}}else Splyt.params.user={id:null,properties:{}};if(a.hasOwnProperty("device")){var e=SplytUtil.gettype(a.device);if("object"===e){if(!a.device.hasOwnProperty("id"))throw new Error(Splyt.ERROR_ARGUMENT);if(Splyt.params.device=a.device,a.device.hasOwnProperty("properties")){if("object"!==SplytUtil.gettype(a.device.properties))throw new Error(Splyt.ERROR_ARGUMENT)}else Splyt.params.device.properties={}}else{if("string"!==e&&"integer"!==e)throw new Error(Splyt.ERROR_ARGUMENT);Splyt.params.device={id:a.device,properties:{}}}}else localStorage?(void 0!==localStorage[Splyt.LOCAL_STORAGE_KEY]?Splyt.params.device={id:localStorage[Splyt.LOCAL_STORAGE_KEY],properties:{}}:Splyt.params.device={id:null,properties:{}},null!==Splyt.params.device.id&&(localStorage[Splyt.LOCAL_STORAGE_KEY]=Splyt.params.device.id)):Splyt.params.device={id:null,properties:{}};var f=window.platform;if((!a.hasOwnProperty("scrape")||a.scrape)&&f&&(f.name&&(Splyt.params.device.properties.browser=f.name),f.version&&(Splyt.params.device.properties.browserversion=f.version),f.os&&(f.os.family&&(Splyt.params.device.properties.osname=f.os.family),f.os.version&&(Splyt.params.device.properties.osversion=f.os.version)),f.description&&(Splyt.params.device.properties.description=f.description),navigator&&navigator.language&&(Splyt.params.device.properties.language=navigator.language.toLowerCase())),a.hasOwnProperty("chartOnly")&&a.chartOnly)Splyt.params.chartOnly=!0;else{Splyt.params.chartOnly=!1;var g=Splyt.getCachedInitParams();a.hasOwnProperty("alwaysFetchTuning")&&!a.alwaysFetchTuning||!Splyt.needFullInit(g)?(Splyt.entityStateChanged("device",g)&&Splyt.Instrumentation.updateDeviceState(Splyt.params.device.properties,c),Splyt.entityStateChanged("user",g)&&Splyt.Instrumentation.updateUserState(Splyt.params.user.properties,c),b&&b(null)):Splyt.fullInit(b,c)}},clearActiveUser:function(){"use strict";Splyt.params.user={id:null,properties:{}}},registerUser:function(a,b,c){"use strict";if(!Splyt.params.chartOnly){sessionStorage.removeItem(Splyt.SESSION_PREVIOUS_INIT_KEY);var d=SplytUtil.gettype(a);if("object"===d){if(!a.hasOwnProperty("id"))throw new Error(Splyt.ERROR_ARGUMENT);if(Splyt.params.user=a,a.hasOwnProperty("properties")){if("object"!==SplytUtil.gettype(a.properties))throw new Error(Splyt.ERROR_ARGUMENT)}else Splyt.params.user.properties={}}else{if("string"!==d&&"integer"!==d)throw new Error(Splyt.ERROR_ARGUMENT);Splyt.params.user={id:a,properties:{}}}var e=Splyt.getTimeStamp(),f=Splyt.xhrObj("application_updateuser",Splyt.PERSONALIZATION,b,[e,e,Splyt.params.user.id,Splyt.params.device.id,Splyt.params.user.properties]);f.success=function(a){var b=a.data;b&&(b.hasOwnProperty("userid")&&null!==b.userid&&(Splyt.params.user.id=b.userid),b.hasOwnProperty("usertuning")&&null!==b.usertuning&&"object"===SplytUtil.gettype(b.usertuning)&&(Splyt.userVars=b.usertuning),b.hasOwnProperty("deviceid")&&null!==b.deviceid&&(Splyt.params.device.id=b.deviceid,localStorage&&(localStorage[Splyt.LOCAL_STORAGE_KEY]=b.deviceid)),b.hasOwnProperty("devicetuning")&&null!==b.devicetuning&&"object"===SplytUtil.gettype(b.devicetuning)&&(Splyt.deviceVars=b.devicetuning),c&&c(b))},f.error=function(){c&&c(null)},Splyt.xhr(f)}},sendDataPoint:function(a,b,c){"use strict";if(!Splyt.params.chartOnly){var d=Splyt.getTimeStamp(),e=[];if(e.push(d),e.push(d),e.push(Splyt.params.user.id),e.push(Splyt.params.device.id),b)for(var f=0;f<b.length;f++)e.push(b[f]);var g=Splyt.xhrObj(a,Splyt.PERSONALIZATION,c,e);Splyt.xhr(g)}},fullInit:function(a,b){var c=Splyt.getTimeStamp(),d=Splyt.xhrObj("application_init_with_entitystate_telem",Splyt.PERSONALIZATION,b,[c,c,Splyt.params.user.id,Splyt.params.device.id,Splyt.params.user.properties,Splyt.params.device.properties]);d.success=function(b){var c=b.data;c&&(c.hasOwnProperty("userid")&&null!==c.userid&&(Splyt.params.user.id=c.userid),c.hasOwnProperty("usertuning")&&null!==c.usertuning&&"object"===SplytUtil.gettype(c.usertuning)&&(Splyt.userVars=c.usertuning),c.hasOwnProperty("deviceid")&&null!==c.deviceid&&(Splyt.params.device.id=c.deviceid,localStorage&&(localStorage[Splyt.LOCAL_STORAGE_KEY]=c.deviceid)),c.hasOwnProperty("devicetuning")&&null!==c.devicetuning&&"object"===SplytUtil.gettype(c.devicetuning)&&(Splyt.deviceVars=c.devicetuning),sessionStorage.setItem(Splyt.SESSION_PREVIOUS_INIT_KEY,JSON.stringify(Splyt.params)),a&&a(c))},d.error=function(){a&&a(null)},Splyt.xhr(d)},needFullInit:function(a){return!a||a.apikey!==Splyt.params.apikey||a.customerId!==Splyt.params.customerId||a.host!==Splyt.params.host||Splyt.params.hasOwnProperty("user")&&a.hasOwnProperty("user")&&a.user.id!==Splyt.params.user.id||Splyt.params.hasOwnProperty("device")&&a.hasOwnProperty("device")&&a.device.id!==Splyt.params.device.id},entityStateChanged:function(a,b){var c=!1;return Splyt.params.hasOwnProperty(a)&&(c=!b||!b.hasOwnProperty(a)||JSON.stringify(Splyt.params[a])!==JSON.stringify(b[a])),c},getCachedInitParams:function(){var a=null;try{a=JSON.parse(sessionStorage.getItem(Splyt.SESSION_PREVIOUS_INIT_KEY))}catch(b){}return a},updateCachedInitParamsProperties:function(a,b){var c=Splyt.getCachedInitParams();if(c){if(c.hasOwnProperty(a)&&"object"==typeof c[a].properties)for(var d in b)c[a].properties.hasOwnProperty(d)&&b.hasOwnProperty(d)&&(c[a].properties[d]=b[d]);sessionStorage.setItem(Splyt.SESSION_PREVIOUS_INIT_KEY,JSON.stringify(c))}},params:{host:"https://data.splyt.com",vishost:"https://dashboard.splyt.com",customerId:null,user:{},device:{}},xhr:SplytUtil.ajax,userVars:{},deviceVars:{},usedVars:{},PERSONALIZATION:"isos-personalization",TOOLS:"isos-tools",TIME_RECORDAGAIN:28800,SDK_VERSION:"4.0.6",WS_VERSION:"4",TOOLS_VERSION:"-1",LOCAL_STORAGE_KEY:"splyt.device.id",SESSION_PREVIOUS_INIT_KEY:"splyt.initParams",TIMEOUT_MODE_TRANSACTION:"TXN",TIMEOUT_MODE_ANY:"ANY",getQueryParms:function(a,b){"use strict";if(null===Splyt.params.customerId)return"";var c=Splyt.WS_VERSION;a===Splyt.TOOLS&&(c=Splyt.TOOLS_VERSION);var d="?ssf_ws_version="+c+"&ssf_cust_id="+Splyt.params.customerId+"&ssf_output=json&ssf_sdk=js&ssf_sdk_version="+Splyt.SDK_VERSION;return a===Splyt.TOOLS&&Splyt.params.apikey&&Splyt.params.apikey.length>0&&(d+="&ssf_api_key="+Splyt.params.apikey),b&&b.length>0&&(d+="&ssf_sdk_contextname="+b),d},buildURL:function(a,b,c){"use strict";var d="/"+b+"/ws/interface/",e=Splyt.params.host;return b===Splyt.TOOLS&&(e=Splyt.params.vishost),e=e.replace(/\/$/,""),e=e.replace(/^\//,""),a=a.replace(/\/$/,""),a=a.replace(/^\//,""),e+d+a+Splyt.getQueryParms(b,c)},xhrObj:function(a,b,c,d,e){"use strict";return e=e||"json",{type:"POST",url:Splyt.buildURL(a,b,c),data:JSON.stringify(d),dataType:e,processData:!1,headers:{"ssf-use-positional-post-params":"true","ssf-contents-not-url-encoded":"true"}}},getTimeStamp:function(){"use strict";var a=new Date;return a.getTime()/1e3},Instrumentation:{updateUserState:function(a,b){"use strict";Splyt.sendDataPoint("datacollector_updateUserState",[a],b),Splyt.updateCachedInitParamsProperties("user",a)},updateDeviceState:function(a,b){"use strict";Splyt.sendDataPoint("datacollector_updateDeviceState",[a],b),Splyt.updateCachedInitParamsProperties("device",a)},beginTransaction:function(a,b,c,d,e){"use strict";Splyt.sendDataPoint("datacollector_beginTransaction",[a,Splyt.TIMEOUT_MODE_TRANSACTION,b,e,c],d)},updateTransaction:function(a,b,c,d,e){"use strict";Splyt.sendDataPoint("datacollector_updateTransaction",[a,b,e,c],d)},endTransaction:function(a,b,c,d,e){"use strict";Splyt.sendDataPoint("datacollector_endTransaction",[a,b,e,c],d)},updateCollection:function(a,b,c,d,e){"use strict";Splyt.sendDataPoint("datacollector_updateCollection",[a,b,c,d],e)},beginAndEnd:function(a,b,c,d){"use strict";Splyt.sendDataPoint("datacollector_endTransaction",[a,b,void 0,c],d)}},Tuning:{getVar:function(a,b){"use strict";var c=function(a){(!Splyt.usedVars[a]||Splyt.getTimeStamp()>Splyt.usedVars[a]+Splyt.TIME_RECORDAGAIN)&&(Splyt.usedVars[a]=Splyt.getTimeStamp(),Splyt.sendDataPoint("tuner_recordUsed",[a,b]))};c(a);var d=b;return null!==Splyt.params.user.id?Splyt.userVars.hasOwnProperty(a)&&(d=Splyt.userVars[a]):null!==Splyt.params.device.id&&Splyt.deviceVars.hasOwnProperty(a)&&(d=Splyt.deviceVars[a]),SplytUtil.result=d,d="undefined"==typeof d||!1===SplytUtil.settype("result",SplytUtil.gettype(b))?b:SplytUtil.result,delete SplytUtil.result,d},refresh:function(a,b){"use strict";if(!Splyt.params.chartOnly){var c=Splyt.getTimeStamp(),d=Splyt.xhrObj("tuner_refresh",Splyt.PERSONALIZATION,a,[c,c,Splyt.params.device.id,[Splyt.params.user.id]]);d.success=function(a){var c=a.data;c&&(c.hasOwnProperty("deviceTuning")&&c.deviceTuning.hasOwnProperty("data")&&"object"===SplytUtil.gettype(c.deviceTuning.data)&&c.deviceTuning.data.hasOwnProperty("value")&&"object"===SplytUtil.gettype(c.deviceTuning.data.value)&&(Splyt.deviceVars=c.deviceTuning.data.value),c.hasOwnProperty("userTuning")&&c.userTuning.hasOwnProperty("data")&&"object"===SplytUtil.gettype(c.userTuning.data)&&c.userTuning.data.hasOwnProperty("value")&&"object"===SplytUtil.gettype(c.userTuning.data.value)&&c.userTuning.data.value.hasOwnProperty(Splyt.params.user.id)&&"object"===SplytUtil.gettype(c.userTuning.data.value[Splyt.params.user.id])&&(Splyt.userVars=c.userTuning.data.value[Splyt.params.user.id])),b&&b()},d.error=function(){b&&b()},Splyt.xhr(d)}}}},Splyt_Purchasing={PURCHASE_CATEGORY:"purchase",purchase:function(a,b,c,d,e,f,g){"use strict";var h={offerId:b,itemName:a,pointOfSale:c};h.price={},h.price[d]=e,Splyt.Instrumentation.beginAndEnd(Splyt_Purchasing.PURCHASE_CATEGORY,f,h,g)}};Splyt.Purchasing=Splyt_Purchasing;var Splyt_Session={SESSION_CATEGORY:"session",begin:function(a,b){"use strict";Splyt.sendDataPoint("datacollector_beginTransaction",[Splyt_Session.SESSION_CATEGORY,Splyt.TIMEOUT_MODE_ANY,a,void 0,{}],b)},end:function(a,b){"use strict";Splyt.Instrumentation.endTransaction(Splyt_Session.SESSION_CATEGORY,a,{},b)}};Splyt.Session=Splyt_Session,Splyt.Web=function(){var a,b={},c=function(){!a.session.isExpiredOrInvalid()&&a.session.pageViewId&&a.session.pageViewInProgress&&(Splyt.Instrumentation.endTransaction("pageView",Splyt.TXN_SUCCESS,null,null,a.session.pageViewId),a.session.pageViewInProgress=!1,i())},d=function(){"use strict";g(),r=!0,q.automaticPageViews&&b.beginPageView()},e=function(){"use strict";var b=!1;if(a.session.isExpiredOrInvalid()&&f(a),a.session.isNew?b=!0:(a.session.sessionProgress+=1,a.session.sessionProgress<100?(a.session.sessionPageViewCount+=1,Splyt.Instrumentation.updateTransaction("session",a.session.sessionProgress,{pageViewCount:a.session.sessionPageViewCount},null,a.session.sessionId)):(Splyt.Instrumentation.endTransaction("session",Splyt.TXN_SUCCESS,null,null,a.session.sessionId),f(a),b=!0)),b){if(Splyt.Instrumentation.beginTransaction("session",q.sessionTimeoutMinutes,{pageViewCount:a.session.sessionPageViewCount},null,a.session.sessionId),q.updateDeviceState){var c=k("device");c&&Splyt.Instrumentation.updateDeviceState({sessionCount:c.sessionCount})}if(q.updateUserState){var d=k("user");d&&Splyt.Instrumentation.updateUserState({sessionCount:d.sessionCount})}}i()},f=function(){"use strict";l("device"),l("user"),a.session.deviceid=j("device"),a.session.userid=j("user"),a.session.expiryTimeMs=n(q.sessionTimeoutMinutes/1440),a.session.isNew=!0,a.session.pageViewInProgress=!1,a.session.pageViewId=m(a.session.pageViewId),a.session.pageViewProgress=0,a.session.sessionId=m(a.session.sessionId),a.session.sessionProgress=0,a.session.sessionPageViewCount=1},g=function(){"use strict";a=null;var b=localStorage.splytWebCacheState;if(b)try{a=JSON.parse(b)}catch(c){}a||(a={device:{},user:{},session:{}}),a.session.isExpiredOrInvalid=h,a.session.isExpiredOrInvalid()&&f(a)},h=function(){"use strict";if(this.deviceid!==j("device"))return!0;if(this.userid!==j("user"))return!0;var a=this.expiryTimeMs;return!a||a-(new Date).getTime()<5e3},i=function(){"use strict";a.session.expiryTimeMs=n(q.sessionTimeoutMinutes/1440),a.session.isNew=!1,localStorage.splytWebCacheState=JSON.stringify(a)},j=function(a){"use strict";var b=null;try{b=Splyt.params[a].id}catch(c){}return b},k=function(b){"use strict";var c=j(b);return c?(a[b].hasOwnProperty(c)&&a[b][c]||(a[b][c]={sessionCount:0}),a[b][c]):null},l=function(b,c){"use strict";var d=j(b);if(d){var e=k(b);(!e||isNaN(parseFloat(e.sessionCount)))&&(e={sessionCount:0}),e.sessionCount=e.sessionCount+1,a[b][d]=e}},m=function(a){var b=(new Date).getTime();return b.toString()===a&&b++,b.toString()},n=function(a){"use strict";return(new Date).getTime()+24*a*60*60*1e3},o=function(){"use strict";var a=window.location.pathname;return"/"==a.charAt(0)?a:"/"+a},p=function(a){"use strict";"interactive"===document.readyState||"complete"===document.readyState?a():document.addEventListener?document.addEventListener("DOMContentLoaded",a):document.attachEvent("onreadystatechange",function(){"interactive"===document.readyState&&a()})},q={automaticPageViews:!0,sessionTimeoutMinutes:30,updateDeviceState:!0,updateUserState:!1},r=!1;return b.startTracking=function(a){"use strict";void 0!==a&&(void 0!==a.automaticPageViews&&(q.automaticPageViews=a.automaticPageViews),void 0!==a.sessionTimeoutMinutes&&(q.sessionTimeoutMinutes=a.sessionTimeoutMinutes),void 0!==a.updateDeviceState&&(q.updateDeviceState=a.updateDeviceState),void 0!==a.updateUserState&&(q.updateUserState=a.updateUserState)),p(d)},b.hasStarted=function(){return r},b.beginPageView=function(d){"use strict";b.hasStarted()&&(d||(d={}),d.hasOwnProperty("path")||(d.path=o()),c(),e(),a.session.pageViewId=m(a.session.pageViewId),a.session.pageViewProgress=0,Splyt.Instrumentation.beginTransaction("pageView",q.sessionTimeoutMinutes,d,null,a.session.pageViewId),a.session.pageViewInProgress=!0,i())},b.updatePageView=function(c){"use strict";b.hasStarted()&&(!a.session.isExpiredOrInvalid()&&a.session.pageViewProgress<99?(a.session.pageViewProgress+=1,Splyt.Instrumentation.updateTransaction("pageView",a.session.pageViewProgress,c,null,a.session.pageViewId)):b.beginPageView(c),i())},b}();var Splyt_Charts={render:function(a,b,c,d,e){if(Visualization){var f=new Visualization,g=f.create("highchart",a,{});g.showLoading();var h=Splyt.xhrObj("xvault",Splyt.TOOLS,void 0,[b,c,d]);h.success=function(b){var c=b.data.info;c.sort=c.plotconfig.params.sort,c.numberStyle=c.yformat||"int",c.xaxis=c.xformat,c.caption=c.infoformat;var d=new Series(b.data.series);d.applyTransforms(),g.destroy(),g=f.create("highchart",a,c),g.addSeries(d,c.type)},Splyt.xhr(h)}}};Splyt.Charts=Splyt_Charts;